### DOCKER CHEAT SHEET
In this cheat sheet, I'll be using <code>apache</code> image and <code>php</code>.
At the end we'll build a **_multi-staged_** php mvc news app with Docker.

#### <u>BASICS COMMANDS</u>
* Container's ID

The CONTAINER ID is the first 12 characters of the full container ID printed out after running <code>docker container run</code>.\
The NAME is generated by docker and can be renamed by user later.
* Create a container with a custom name and publish it to a port<code>\<host-port:container-port></code> without running.
```
docker create --pulblish | -p 8080:80 --name apache-server httpd 
8fad9d84692858682f33ff2b60d3ee43e946af96d062c1fb3aa399ea082e5345
```
* Running a container (<code>create</code> and <code>start</code>)
```
docker container run -p 8080:80 --name apache-server httpd 

# or we don't have to precise "container"

docker run -p 8080:80 --name apache-server httpd
```
* Naming and renaming a container
```
docker container run --detach --publish 8080:80 --name apache-server httpd

# Renaming

docker container rename <contaienr ID> <new name>
```
* Running a container in the background
```
docker container run --detach | -d -p 80800:80 --name apache-server
```
* Running a container interactively 
```
docker container run -it | --interactive --tty
#
docker container run -it ubuntu 
```
* Starting and restarting a container
```
docker container start apache-server | <container ID=output of previous command>
apache-server
```
* Stopping a container (send a <code>_SIGTERM_</code> signal)
```
docker container stop apache-server # or container ID
```
* Restarting a stopped container
```
docker container restart apache-server # or container ID
```
* Killing a container (send a <code>_SIGKILL_</code> signal)
```
docker container kill apache-server # once killed it can't be restarted
```
* Running and stopping (<code>_SIGTERM_</code>) a container after <code>Ctrl + C</code>
```
docker container run --rm -it ubuntu
```
* Removing a stopped <code>_SIGTERM_</code> container
```
docker container rm | -f <container ID | name>
#
docker container rm apache-server
```
* Removing all dangling (stopped <code>_SIGTERM_</code>) containers 
```
docker container prune
```
* Listing runnning containers
```
docker container ps | ls
```
* Listing running and stopped containers
```
docker container ps -a | --all | ls -a | ls --all
```
* Executing command inside a container (image configured to receive arguments)
```
docker container run --rm alpine uname a
Linux 094a0cbf37ad 4.19.0-16-amd64 #1 SMP Debian 4.19.181-1 (2021-03-19) x86_64 Linux
```
In the command above the uname -a is passed through the alpine image and get executed.

* Bind Mounts for executable images but not only

When you use a bind mount, a file or directory on the host machine is mounted into a container. The file or directory is referenced by its absolute path on the host machine. 

```
docker run -d -it --name devtest --mount type=bind,source="$(pwd)"/target,target=/app nginx:latest
```
Using the <code>--volume | -v</code> flag.
```
docker run -d -it --name devtest -v "$(pwd)" target:/app nginx:latest

# this command will let us verify if the bind mount was created correctly

docker inspect devtest (container name)
```
* Inspecting a Docker object

Return low-level information on Docker Objects. It provides detailed information on constructs controlled by Docker.
```
docker inspect [OPTIONS] NAME[ID] [NAME | ID ...]
```

